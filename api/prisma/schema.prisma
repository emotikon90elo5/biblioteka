generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Accounts {
  id          Int     @id @default(autoincrement())
  login       String  @db.Text
  pass        String  @db.Text
  school      Schools @relation(fields: [schoolsId], references: [id])
  accountType Int
  schoolsId   Int
}

model Bookcases {
  id        Int       @id @default(autoincrement())
  school    Schools   @relation(fields: [schoolsId], references: [id])
  name      String    @db.VarChar(512)
  shelves   Shelves[]
  schoolsId Int
}

model Books {
  id              Int     @id @default(autoincrement())
  shelf           Shelves @relation(fields: [shelvesId], references: [id])
  title           String  @db.VarChar(2048)
  author          String  @db.VarChar(512)
  publishingHouse String  @db.VarChar(512)
  ageCategory     Int
  type            Type    @relation(fields: [typeid], references: [id])
  localid         Int
  typeid          Int
  shelvesId       Int
  rents           Rents[]
}

model Class {
  id        Int      @id @default(autoincrement())
  name      String   @db.Text
  school    Schools  @relation(fields: [schoolsId], references: [id])
  pupils    Pupils[]
  schoolsId Int
}

model Pupils {
  id        Int     @id @default(autoincrement())
  firstName String  @db.Text
  lastName  String  @db.Text
  class     Class   @relation(fields: [classId], references: [id])
  rents     Rents[]
  classId   Int
}

model Rents {
  id         Int       @id @default(autoincrement())
  pupils     Pupils    @relation(fields: [pupilsId], references: [id])
  book       Books     @relation(fields: [booksId], references: [id])
  rented     Boolean   @default(true)
  rentTime   DateTime  @default(now()) @db.Timestamp(0)
  returnTime DateTime? @db.Timestamp(0)
  booksId    Int
  pupilsId   Int
}

model Schools {
  id        Int         @id @default(autoincrement())
  name      String      @db.VarChar(512)
  location  String      @db.VarChar(2048)
  accounts  Accounts[]
  class     Class[]
  bookcases Bookcases[]
}

model Shelves {
  id          Int       @id @default(autoincrement())
  bookcase    Bookcases @relation(fields: [bookcasesId], references: [id])
  name        String    @db.VarChar(512)
  books       Books[]
  bookcasesId Int
}

model Type {
  id    Int     @id @default(autoincrement())
  name  String  @db.VarChar(512)
  books Books[]
}
